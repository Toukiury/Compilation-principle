# Pascal编译器错误测试用例

本目录包含一系列用于测试Pascal编译器错误处理能力的测试用例。每个测试用例都包含特定类型的语法或语义错误，用于验证编译器能否正确检测和报告这些错误。

## 编译器处理流程

在编译过程中，Pascal编译器会经历以下几个阶段：

1. **词法分析**：将源代码转换为令牌(Token)序列
2. **语法分析**：根据语法规则构建语法树
3. **语义分析**：检查类型匹配、变量声明等语义约束
4. **代码生成**：生成目标代码（如C代码）

### 词法分析输出示例

词法分析器输出的令牌格式如下：

```
行号    列号    Token类型    Token值
======================================
1       1       KEYWORD     program
1       9       SYMBOL      ;
2       1       KEYWORD     const
3       3       IDENTIFIER  max_val
3       11      SYMBOL      =
3       13      INTEGER     100
```

表中，"行号"和"列号"指示了令牌在源代码中的位置，这些位置信息在编译器报告错误时非常重要。

## 测试用例说明

### 语法错误测试

1. **0_missing_program_name.pas**
   - 错误类型：程序头错误
   - 描述：缺少程序名称，程序头只有关键字`program`后跟分号
   - 预期结果：编译器应该报告程序名缺失错误

2. **1_incorrect_const_assignment.pas**
   - 错误类型：常量声明错误
   - 描述：使用`==`而不是`=`来给常量赋值
   - 预期结果：编译器应该报告常量赋值语法错误

3. **2_missing_var_type.pas**
   - 错误类型：变量声明错误
   - 描述：变量声明中缺少类型说明
   - 预期结果：编译器应该报告变量类型缺失错误

4. **3_incomplete_assignment.pas**
   - 错误类型：不完整的赋值语句
   - 描述：赋值语句右侧缺少表达式
   - 预期结果：编译器应该报告不完整赋值语句错误

5. **4_incomplete_expression.pas**
   - 错误类型：不完整的表达式
   - 描述：表达式中运算符后缺少操作数
   - 预期结果：编译器应该报告不完整表达式错误

6. **5_keyword_typo.pas**
   - 错误类型：关键字拼写错误
   - 描述：关键字`program`和`integer`拼写错误
   - 预期结果：编译器应该报告未知标识符或关键字错误

7. **7_missing_procedure_body.pas**
   - 错误类型：过程定义错误
   - 描述：过程声明后缺少过程体
   - 预期结果：编译器应该报告过程体缺失错误

8. **8_multiple_errors.pas**
   - 错误类型：多种错误
   - 描述：包含多种类型的语法和语义错误
   - 预期结果：编译器应该能够识别并报告多个错误

9. **11_missing_semicolon.pas**
   - 错误类型：缺少分号
   - 描述：语句结束处缺少分号
   - 预期结果：编译器应该报告缺少分号的错误

### 语义错误测试

1. **6_undeclared_identifier.pas**
   - 错误类型：未声明标识符
   - 描述：使用未在程序中声明的变量
   - 预期结果：编译器应该报告未声明变量错误

2. **9_incorrect_array_declaration.pas**
   - 错误类型：数组声明错误
   - 描述：数组下标使用负数，或使用了错误的数组声明语法
   - 预期结果：编译器应该报告非法数组声明错误

3. **10_mismatched_types.pas**
   - 错误类型：类型不匹配
   - 描述：将不兼容的类型进行赋值或运算
   - 预期结果：编译器应该报告类型不匹配或类型检查错误

## 使用方法

可以将这些测试用例文件作为输入传递给Pascal编译器，验证编译器的错误检测和报告功能：

```
pascc <测试文件名>
```

## 测试目的

这些测试用例主要用于验证编译器的以下功能：

1. 词法分析器能否识别拼写错误的关键字和标识符
2. 语法分析器能否检测到不正确的语法结构
3. 语义分析器能否检测类型错误和未声明的标识符
4. 编译器能否准确报告错误的位置和类型
5. 编译器在遇到多个错误时的鲁棒性表现 
